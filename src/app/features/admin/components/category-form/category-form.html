<div class="category-form">
  <!-- Form Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h2 class="text-2xl font-bold text-gray-800">
        {{ isEditMode ? 'Edit Category' : 'Add New Category' }}
      </h2>
      <p class="text-gray-600 mt-1">
        {{ isEditMode ? 'Update category information' : 'Create a new category
        for your products' }}
      </p>
    </div>
  </div>

  <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()">
    <div class="space-y-6">
      <!-- Category Information Card -->
      <p-card>
        <ng-template pTemplate="header">
          <div class="p-4 border-b">
            <h3 class="text-lg font-semibold flex items-center gap-2">
              <i class="pi pi-tags text-blue-600"></i>
              Category Information
            </h3>
          </div>
        </ng-template>

        <div class="space-y-6">
          <!-- Category Name -->
          <div>
            <label class="block text-sm font-medium mb-2"
              >Category Name *</label
            >
            <input
              type="text"
              pInputText
              formControlName="name"
              placeholder="Enter category name (e.g., Electronics, Clothing, Books)"
              class="w-full"
              [class.ng-invalid]="categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched"
            />
            @if (categoryForm.get('name')?.invalid &&
            categoryForm.get('name')?.touched) {
            <small class="text-red-500">
              @if (categoryForm.get('name')?.errors?.['required']) {
              <span>Category name is required</span>
              } @if (categoryForm.get('name')?.errors?.['minlength']) {
              <span>Category name must be at least 2 characters long</span>
              } @if (categoryForm.get('name')?.errors?.['maxlength']) {
              <span>Category name cannot exceed 50 characters</span>
              }
            </small>
            }
          </div>

          <!-- Category Description -->
          <div>
            <label class="block text-sm font-medium mb-2">Description *</label>
            <textarea
              pInputTextarea
              formControlName="description"
              placeholder="Enter a detailed description of this category and what products it includes..."
              rows="4"
              class="w-full"
              [class.ng-invalid]="categoryForm.get('description')?.invalid && categoryForm.get('description')?.touched"
            ></textarea>
            <div class="flex justify-between items-center mt-1">
              @if (categoryForm.get('description')?.invalid &&
              categoryForm.get('description')?.touched) {
              <small class="text-red-500">
                @if (categoryForm.get('description')?.errors?.['required']) {
                <span>Description is required</span>
                } @if (categoryForm.get('description')?.errors?.['minlength']) {
                <span>Description must be at least 10 characters long</span>
                } @if (categoryForm.get('description')?.errors?.['maxlength']) {
                <span>Description cannot exceed 500 characters</span>
                }
              </small>
              } @else {
              <div></div>
              }
              <small class="text-gray-500">
                {{ categoryForm.get('description')?.value?.length || 0 }}/500
                characters
              </small>
            </div>
          </div>
        </div>
      </p-card>

      <!-- Form Actions -->
      <div class="flex gap-3 pt-4">
        <button
          pButton
          type="submit"
          [label]="isEditMode ? 'Update Category' : 'Create Category'"
          icon="pi pi-check"
          class="flex-1 p-button-lg"
          [loading]="saving"
          [disabled]="categoryForm.invalid"
        ></button>

        <button
          pButton
          type="button"
          label="Cancel"
          icon="pi pi-times"
          class="flex-1 p-button-outlined p-button-lg"
          (click)="onCancelModal()"
        ></button>
      </div>

      <!-- Success State Preview -->
      @if (categoryForm.valid) {
      <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
        <div class="flex items-center gap-3">
          <i class="pi pi-check-circle text-green-500"></i>
          <p class="text-sm text-green-600 font-medium">
            Category information is complete and ready to {{ isEditMode ?
            'update' : 'create' }}!
          </p>
        </div>
      </div>
      }
    </div>
  </form>
</div>

<p-toast></p-toast>
